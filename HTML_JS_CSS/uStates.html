<!DOCTYPE html>

<!--

Author: Thomas van der Wardt
Student number: 10900578
File: uStates.html
External files: uStates.js, uStates.css, d3.v3.js
Last edited: 2-6-2015

-->
<html>
    <head>
        <title>US States</title>

        <link rel="stylesheet" type="text/css" href="uStates.css">
		<meta charset="UTF-8">
    </head>
	<body>
		<div id="tooltip"></div>
		<svg width="960" height="600" id="statesvg"></svg>
		<script src="uStates.js"></script>
		<script src="d3.v3.js"></script>
		<script src="queue.v1.min.js"></script>
		<script>
			
			var svg = d3.select("body").append("svg")

			function tooltipHtml(n, d){	/* function to create html content string in tooltip div. */
				return "<h4>"+n+"</h4><table>"+
				"<tr><td>Low</td><td>"+(d.low)+"</td></tr>"+
				"<tr><td>Average</td><td>"+(d.avg)+"</td></tr>"+
				"<tr><td>High</td><td>"+(d.high)+"</td></tr>"+
				"</table>";
			}
			
			var q = queue(1);
				q.defer(d3.csv, "sample_data.csv");
				q.await(Data);
				
			function Data(errors, data){
				console.log(data[0]);
			}
			
			var sampleData ={
			"WA": ["50"], "DE": ["50"], "DC": ["50"], "WI": ["50"], "WV": ["50"], "HI": ["50"], "FL": ["50"], "WY": ["50"], "NH": ["50"], "NJ": ["50"], "NM": ["50"], "TX": ["50"], "NC": ["50"], "ND": ["50"], "NE": ["50"], "TN": ["50"], "NY": ["50"], "PA": ["50"], "LS": ["50"], "CA": ["50"], "NV": ["50"], "VA": ["50"], "CO": ["50"], "AK": ["50"], "AL": ["50"], "AR": ["50"], "VT": ["50"], "IL": ["50"], "GA": ["50"], "IN": ["50"], "IA": ["50"], "OK": ["50"], "AZ": ["50"], "ID": ["50"], "CT": ["50"], "ME": ["50"], "MD": ["50"], "MA": ["50"], "OH": ["50"], "UT": ["50"], "MO": ["50"], "MN": ["50"], "MI": ["50"], "RI": ["50"], "KS": ["50"], "MT": ["50"], "MS": ["50"], "SC": ["50"], "KY": ["50"], "OR": ["50"], "SD": ["50"]}
			sampleData
				.forEach(function(d){ 
				console.log(d);
				 var low = 50,
					mid = 50, 
					high = 50;
					
					sampleData[d]={
						low:d3.min([low,mid,high]),
						high:d3.max([low,mid,high]),
						avg:Math.round((low+mid+high)/3),
						color:d3.interpolate("#ffffff", "#000000")(low/100)
					};
				}); 
		
			
		/* draw states on id #statesvg */	
		uStates.draw("#statesvg", sampleData, tooltipHtml);
		
		</script>
	</body>
</html>
 

		var q = queue(1);
			q.defer(d3.csv, "sample_data.csv");
			q.await(drawMap);
			
		function drawMap(errors, data){
			
			drawData(data)
			
			function drawData(data){
				data.forEach(function(d) {
					
				});
				svg.selectAll("#statesvg")
					.data(data)
					.enter()
					.attr("fill", "#ffffb2");
			};
		
		}; 